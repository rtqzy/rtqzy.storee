<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QR Code Generator ‚Äî Rtqzy Tools</title>
  <meta name="description" content="Generate custom QR codes instantly with logo, color and PDF export.">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/lucide@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    html[data-theme='dark'] {
      background-color: #0f172a;
      color: #f1f5f9;
    }
    html[data-theme='light'] {
      background-color: #f8fafc;
      color: #0f172a;
    }
    .glass {
      backdrop-filter: blur(16px);
      background: rgba(255, 255, 255, 0.07);
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 0 25px rgba(255, 255, 255, 0.05);
    }
    html[data-theme='dark'] .glass {
      background: rgba(30, 41, 59, 0.25);
      border-color: rgba(255, 255, 255, 0.05);
    }
    canvas {
      max-width: 100%;
    }
  </style>

  <script>
    function toggleTheme() {
      const html = document.documentElement;
      const newTheme = html.dataset.theme === "light" ? "dark" : "light";
      html.dataset.theme = newTheme;
      localStorage.setItem("theme", newTheme);
      document.getElementById("theme-icon").innerHTML = newTheme === "dark"
        ? '<i data-lucide="moon"></i>' : '<i data-lucide="sun"></i>';
      lucide.createIcons();
    }

    window.addEventListener("DOMContentLoaded", () => {
      const saved = localStorage.getItem("theme") || "light";
      document.documentElement.dataset.theme = saved;
      document.getElementById("theme-icon").innerHTML = saved === "dark"
        ? '<i data-lucide="moon"></i>' : '<i data-lucide="sun"></i>';
      lucide.createIcons();
    });
  </script>
</head>
<body class="min-h-screen flex flex-col items-center font-sans p-6">

  <!-- Header -->
  <header class="glass w-full max-w-4xl mx-auto flex justify-between items-center px-6 py-4 rounded-xl mt-4">
    <a href="index.html" class="text-2xl font-bold tracking-tight">‚Üê Rtqzy Tools</a>
    <button onclick="toggleTheme()" class="rounded-full p-2 hover:bg-blue-500 hover:text-white transition" id="theme-icon"></button>
  </header>

  <!-- Main -->
  <main class="w-full max-w-2xl text-center mt-12 space-y-8">
    <h1 class="text-4xl font-extrabold">QR Code Generator</h1>
    <p class="text-gray-600 dark:text-gray-300">Customize with colors and logo. Download as PNG or PDF.</p>

    <input id="qr-input" type="text" placeholder="Enter URL or text" class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-lg" />

    <!-- Color Pickers -->
    <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mt-4">
      <label class="flex items-center gap-2 text-sm">
        Foreground: <input type="color" id="fg-color" value="#000000" />
      </label>
      <label class="flex items-center gap-2 text-sm">
        Background: <input type="color" id="bg-color" value="#ffffff" />
      </label>
      <label class="flex items-center gap-2 text-sm">
        Logo: <input type="file" id="logo-upload" accept="image/*" />
      </label>
    </div>

    <!-- QR Canvas -->
    <div class="relative inline-block mt-6">
      <canvas id="qr-canvas" class="rounded-xl bg-white dark:bg-slate-100 p-2"></canvas>
      <img id="logo-img" class="absolute w-12 h-12 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none" style="display:none;" />
    </div>

    <!-- Buttons -->
    <div class="flex justify-center gap-4 mt-4">
      <button onclick="downloadQR()" class="px-4 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition">Download PNG</button>
      <button onclick="downloadPDF()" class="px-4 py-2 bg-green-600 text-white rounded-full hover:bg-green-700 transition">Download PDF</button>
    </div>
  </main>

  <!-- Footer -->
  <footer class="text-center mt-16 text-xs text-gray-500 dark:text-gray-400">
    &copy; 2025 Rtqzy.store ‚Äî Custom QR Generator üîó
  </footer>

  <script>
    const input = document.getElementById('qr-input');
    const canvas = document.getElementById('qr-canvas');
    const fgColor = document.getElementById('fg-color');
    const bgColor = document.getElementById('bg-color');
    const logoInput = document.getElementById('logo-upload');
    const logoImg = document.getElementById('logo-img');

    function generateQR(text) {
      QRCode.toCanvas(canvas, text || 'https://rtqzy.store', {
        color: {
          dark: fgColor.value,
          light: bgColor.value
        },
        width: 256
      }, (error) => {
        if (error) console.error(error);
      });
    }

    function updateQR() {
      generateQR(input.value);
    }

    function overlayLogo() {
      if (!logoImg.src || logoImg.style.display === "none") return;
      const ctx = canvas.getContext("2d");
      const size = 48;
      const x = (canvas.width - size) / 2;
      const y = (canvas.height - size) / 2;
      ctx.drawImage(logoImg, x, y, size, size);
    }

    function downloadQR() {
      overlayLogo();
      const link = document.createElement('a');
      link.download = 'qr-code.png';
      link.href = canvas.toDataURL();
      link.click();
    }

    async function downloadPDF() {
      overlayLogo();
      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF();
      const imgData = canvas.toDataURL("image/png");
      pdf.text("QR Code", 10, 10);
      pdf.addImage(imgData, 'PNG', 10, 20, 80, 80);
      pdf.save("qr-code.pdf");
    }

    input.addEventListener('input', updateQR);
    fgColor.addEventListener('input', updateQR);
    bgColor.addEventListener('input', updateQR);

    logoInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function (evt) {
        logoImg.src = evt.target.result;
        logoImg.style.display = 'block';
        updateQR();
      };
      reader.readAsDataURL(file);
    });

    generateQR('https://rtqzy.store');
  </script>
</body>
</html>
